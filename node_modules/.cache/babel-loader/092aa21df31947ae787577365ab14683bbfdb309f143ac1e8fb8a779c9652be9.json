{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Uday Shreemali\\\\Desktop\\\\frontevent\\\\src\\\\Book.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport Header from './Header';\nimport Footer from './Footer';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\n// import './PerEvent.css';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst loadScript = src => {\n  return new Promise(resolve => {\n    const script = document.createElement(\"script\");\n    script.src = src;\n    script.onload = () => {\n      resolve(true);\n    };\n    script.onerror = () => {\n      resolve(false);\n    };\n    document.body.appendChild(script);\n  });\n};\nconst displayRazorpay = async (amount, event_id, navigate) => {\n  console.log(amount, event_id);\n  const res = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\n  if (!res) {\n    alert(\"You are offline. Payment cannot proceed.\");\n    return;\n  }\n  const options = {\n    key: \"rzp_test_dEYhZg38SrkYMD\",\n    currency: \"INR\",\n    amount: amount * 100,\n    name: \"Event Booking\",\n    description: \"Thanks for booking with us!\",\n    image: \"https://res.cloudinary.com/dtdlad1ud/image/upload/v1707733051/uhwydfqry5wqwkaazbbk.jpg\",\n    handler: async function (response) {\n      try {\n        const result = await axios.post(\"http://localhost:3046/api/v1/users/booking\", {\n          event_id\n        }, {\n          headers: {\n            Authorization: `Token ${sessionStorage.getItem(\"adminToken\")}`\n          }\n        });\n        toast.success(result.data.message);\n        navigate(\"/mybooking\");\n      } catch (error) {\n        console.error(\"Error in booking:\", error);\n        toast.error(\"Booking failed. Please try again.\");\n      }\n    },\n    prefill: {\n      name: \"name\"\n    }\n  };\n  const paymentObject = new window.Razorpay(options);\n  paymentObject.open();\n};\nexport const book = () => {\n  _s();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    state\n  } = location;\n  const {\n    event\n  } = state || {};\n  const handleBookTicket = () => {\n    const token = sessionStorage.getItem('adminToken');\n    if (!token) {\n      toast.warn(\"You need to be logged in to proceed with the booking.\");\n      navigate('/signin');\n    } else {\n      displayRazorpay(event.price, event._id, navigate);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"backp\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        className: \"backp img-fluid d-flex\",\n        src: (event === null || event === void 0 ? void 0 : event.image) || 'https://res.cloudinary.com/dtdlad1ud/image/upload/v1707733051/uhwydfqry5wqwkaazbbk.jpg',\n        alt: \"Hero Background\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"bg-light text-black\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: event === null || event === void 0 ? void 0 : event.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"\\u20B9\", event === null || event === void 0 ? void 0 : event.price]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Warm To Welcome You\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"m-2\",\n          children: /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"When and Where\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 31\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Date and Time\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: [event === null || event === void 0 ? void 0 : event.s_date, \" to \", event === null || event === void 0 ? void 0 : event.e_date]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Location\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          children: event === null || event === void 0 ? void 0 : event.location\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"justify-center btn btn-primary form-control mb-3\",\n          onClick: handleBookTicket,\n          children: \"Book Ticket\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(book, \"ZmJpvzBBf8J7VCgSKqUUk0eHjAY=\", false, function () {\n  return [useLocation, useNavigate];\n});\nexport default PerEvent;","map":{"version":3,"names":["React","Header","Footer","useLocation","useNavigate","axios","toast","jsxDEV","_jsxDEV","Fragment","_Fragment","loadScript","src","Promise","resolve","script","document","createElement","onload","onerror","body","appendChild","displayRazorpay","amount","event_id","navigate","console","log","res","alert","options","key","currency","name","description","image","handler","response","result","post","headers","Authorization","sessionStorage","getItem","success","data","message","error","prefill","paymentObject","window","Razorpay","open","book","_s","location","state","event","handleBookTicket","token","warn","price","_id","children","fileName","_jsxFileName","lineNumber","columnNumber","className","alt","title","s_date","e_date","onClick","PerEvent"],"sources":["C:/Users/Uday Shreemali/Desktop/frontevent/src/Book.js"],"sourcesContent":["import React from 'react';\r\nimport Header from './Header';\r\nimport Footer from './Footer';\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\n// import './PerEvent.css';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { toast } from 'react-toastify';\r\n\r\nconst loadScript = (src) => {\r\n  return new Promise((resolve) => {\r\n    const script = document.createElement(\"script\");\r\n    script.src = src;\r\n    script.onload = () => {\r\n      resolve(true);\r\n    };\r\n    script.onerror = () => {\r\n      resolve(false);\r\n    };\r\n    document.body.appendChild(script);\r\n  });\r\n};\r\n\r\nconst displayRazorpay = async (amount, event_id, navigate) => {\r\n  console.log(amount, event_id);\r\n  const res = await loadScript(\"https://checkout.razorpay.com/v1/checkout.js\");\r\n\r\n  if (!res) {\r\n    alert(\"You are offline. Payment cannot proceed.\");\r\n    return;\r\n  }\r\n\r\n  const options = {\r\n    key: \"rzp_test_dEYhZg38SrkYMD\", \r\n    currency: \"INR\",\r\n    amount: amount * 100,\r\n    name: \"Event Booking\",\r\n    description: \"Thanks for booking with us!\",\r\n    image: \"https://res.cloudinary.com/dtdlad1ud/image/upload/v1707733051/uhwydfqry5wqwkaazbbk.jpg\",\r\n    handler: async function (response) {\r\n      try {\r\n        const result = await axios.post(\r\n          \"http://localhost:3046/api/v1/users/booking\",\r\n          { event_id },\r\n          {\r\n            headers: {\r\n              Authorization: `Token ${sessionStorage.getItem(\"adminToken\")}`,\r\n            },\r\n          }\r\n        );\r\n        toast.success(result.data.message);\r\n        navigate(\"/mybooking\");\r\n      } catch (error) {\r\n        console.error(\"Error in booking:\", error);\r\n        toast.error(\"Booking failed. Please try again.\");\r\n      }\r\n    },\r\n    prefill: {\r\n      name: \"name\",\r\n    },\r\n  };\r\n\r\n  const paymentObject = new window.Razorpay(options);\r\n  paymentObject.open();\r\n};\r\n\r\nexport const book = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { state } = location;\r\n  const { event } = state || {};\r\n\r\n  const handleBookTicket = () => {\r\n    const token = sessionStorage.getItem('adminToken');\r\n      if (!token) {\r\n      toast.warn(\"You need to be logged in to proceed with the booking.\");\r\n      navigate('/signin');\r\n    } else {\r\n      displayRazorpay(event.price, event._id, navigate);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Header />\r\n      <div className=\"backp\">\r\n        <img\r\n          className=\"backp img-fluid d-flex\"\r\n          src={event?.image || 'https://res.cloudinary.com/dtdlad1ud/image/upload/v1707733051/uhwydfqry5wqwkaazbbk.jpg'}\r\n          alt=\"Hero Background\"\r\n        />\r\n        <section className=\"bg-light text-black\">\r\n          <h1>{event?.title}</h1>\r\n          <p>₹{event?.price}</p>\r\n          <h3>Warm To Welcome You</h3>\r\n          <hr />\r\n          <h5 className=\"m-2\"><strong>When and Where</strong></h5>\r\n          <p>Date and Time</p>\r\n          <h3>{event?.s_date} to {event?.e_date}</h3>\r\n          <p>Location</p>\r\n          <h3>{event?.location}</h3>\r\n          <button className=\"justify-center btn btn-primary form-control mb-3\" onClick={handleBookTicket}>\r\n            Book Ticket\r\n          </button>\r\n        </section>\r\n      </div>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PerEvent;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}